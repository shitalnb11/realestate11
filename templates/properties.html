{% load static %}
<!DOCTYPE html>
<html lang="en">
 
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Properties </title>
 
  <!-- ‚úÖ Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
 
  <!-- ‚úÖ Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
 <link rel="icon" type="image/png" sizes="32x32" href="{% static 'img/COMPANY22.PNG' %}">
  <!-- ‚úÖ Custom CSS -->
  <!-- <link rel="stylesheet" href="{% static 'css/nav.css' %}"> -->
  <style>
   
  

   /* Force navbar full width */
 .navbar {
  width: 100% !important;
  height: 65px;
  left: 0;
  right: 0;
  margin: 0;
  padding: 0.5rem 1rem;
  position: fixed;
  top: 0;
  margin-bottom: 100px;
  z-index: 1030; }

    .property-card {
        border: none;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
        
    }
 
    .property-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
 
    .card-img-container {
        position: relative;
        height: 250px;
        overflow: hidden;
    }
 
    .card-img-top {
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
 
    .property-card:hover .card-img-top {
        transform: scale(1.05);
    }
 
    .property-type-badge {
        position: absolute;
        top: 15px;
        left: 15px;
        background: rgba(0, 123, 255, 0.9);
        color: white;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
    }
 
    .save-property-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }
 
    .save-property-btn:hover {
        background: #ff4757;
        color: white;
    }
 
    .price-section .price {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2c3e50;
    }
 
    .property-features {
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid #eee;
    }
 
    .feature {
        font-size: 0.9rem;
        color: #666;
    }
 
    .feature i {
        margin-right: 5px;
        color: #007bff;
    }
 
    .card-actions {
        display: flex;
        gap: 10px;
    }
 
    .card-actions .btn {
        flex: 1;
    }
 
    .filter-bar {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin: 20px auto;
        max-width: 1200px;
    }
 
    .filter-bar input,
    .filter-bar select {
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin: 0 10px;
    }
 
    .filter-bar .btn {
        margin-left: 10px;
    }
 
    .no-properties {
        padding: 60px 20px;
    }
 
    .no-properties i {
        opacity: 0.5;
    }
    footer {
  background-color: #222;
  color: white;
  width: 100%;
}

footer a {
  text-decoration: none;
}

footer a:hover {
  color: #FFD700;
}

.custom-navbar {
  position: sticky;
  top: 0;
  z-index: 1000; 
  background-color: #000; 
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.delegent-platform .footer-link {
  color: #fff;
  text-decoration: none;
  
}
html, body {
  margin: 0 !important;
  padding: 0 !important;
  width: 100%;
  height: 100%;
  background-color: #f9f9f9; /* optional */
  overflow-x: hidden;
}

/* Main Page Container Fix */
.container,
.container-fluid,
.row {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

/* ‚úÖ Footer Full Width + No Bottom Space */
.site-footer {
  background-color: #111;
  color: #fff;
  width: 100vw;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  margin-bottom: 0 !important;  /* removes bottom gap */
  padding: 60px 0 20px;
  box-sizing: border-box;
  overflow-x: hidden;
}

/* ‚úÖ Force footer to stay at bottom visually */
body > footer.site-footer {
  display: block;
  bottom: 0;
}

/* ‚úÖ Remove any stray gaps caused by elements below footer */
body::after {
  content: "";
  display: block;
  height: 0;
  margin: 0;
  padding: 0;
}

/* ‚úÖ Optional footer inner styling */
.site-footer .footer-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 40px;
}

.footer-link {
  color: #bbb;
  text-decoration: none;
  display: inline-block;
  margin-bottom: 6px;
  transition: color 0.3s ease;
}
.footer-link:hover {
  color: #00bcd4;
}

.social-icons a {
  color: #bbb;
  margin-right: 12px;
  font-size: 20px;
  transition: color 0.3s ease, transform 0.3s ease;
}
.social-icons a:hover {
  color: #00bcd4;
  transform: scale(1.1);
}
footer + div,
footer + section {
  margin-top: 0 !important;
  padding-top: 0 !important;
  height: 0 !important;
  display: none !important;
}

/* üí• Remove bottom white space below footer */


html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  background-color: #fff; /* ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§§‡•Å‡§ù‡•ç‡§Ø‡§æ page color ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡•á */
}
/* üß± Full width, no gap footer */
footer.footer {
  background: #0d0d0d;
  color: white;
  width: 100vw;
  margin: 0 !important;
  padding: 60px 0 25px;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  overflow: hidden;
  box-sizing: border-box;
}

/* ‚úÇÔ∏è Remove all extra spacing around footer */
html, body {
  margin: 0 !important;
  padding: 0 !important;
  height: 100%;
  overflow-x: hidden;
  background-color: #f9f9f9;
}

/* ‚úÇÔ∏è Remove top/bottom gap between sections */
body > * {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

footer.footer + * {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Ensure page fits viewport */
body {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

main {
  flex: 1;
}

/* ‚úÖ Remove Bootstrap container‚Äôs default padding */
#foot.container-fluid, 
#foot.container {
  padding-left: 0 !important;
  padding-right: 0 !important;
  margin: 0 !important;
  width: 100%;
}


  </style>
</head>
 
 

 
<body>
  <!-- ‚úÖ Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="{% url 'home' %}">
        <img src="{% static 'img/COMPANY22.PNG' %}" alt="Delegent Properties" height="40">
      </a>
     
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
     
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
          <li class="nav-item"><a class="nav-link active" href="{% url 'properties' %}">Properties</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact</a></li>
          {% if user.is_authenticated %}
            <form action="{% url 'logout' %}" method="post" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="btn btn-link nav-link" style="color:white; text-decoration:none;">Logout</button>
            </form>
          {% else %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'login' %}">Login/Register</a>
            </li>
          {% endif %}
        </ul>
        <!-- <p style="color:white; margin-top:15px; margin-left:20px; color:rgb(207,198,198);">
          {% if user.is_authenticated %}
            User: {{ user.username }}
          {% else %}
            User: Not logged in
          {% endif %}
        </p> -->
      </div>
    </div>
  </nav>
 
  <!-- ‚úÖ Header -->
  <header class="text-center py-4" style="margin-top: 100px;">
    <h1>Properties for Sale in Pune</h1>
    <p>Explore Apartments, Villas, 3BHK Homes, and more across Pune</p>
  </header>
 
  <!-- üîç Filter/Search Bar -->
  <section class="filter-bar text-center mb-4">
    <input type="text" id="searchInput" placeholder="Search by property or area..." autocomplete="off">
 
    <select id="priceFilter">
      <option value="">Any Price</option>
      <option value="5000000">Below ‚Çπ50 Lakhs</option>
      <option value="10000000">‚Çπ5000000 Lakhs - ‚Çπ10000000 Cr</option>
      <option value="20000000">‚Çπ10000000 Cr - ‚Çπ20000000 Cr</option>
      <option value="30000000">Above ‚Çπ20000000 Cr</option>
    </select>
 
    <select id="typeFilter">
      <option value="">All Types</option>
      <option value="Apartment">Apartment</option>
      <option value="Villa">Villa</option>
      <option value="Penthouse">Penthouse</option>
      <option value="Row House">Row House</option>
      <option value="2 BHK">2 BHK</option>
      <option value="4 BHK">4 BHK</option>
    </select>
 
    <button class="btn btn-primary" onclick="filterProperties()">Apply Filters</button>
    <button class="btn btn-outline-danger" onclick="showFavorites()">‚ù§Ô∏è Favourites</button>
 
 
  <!-- ‚úÖ Properties Grid Section -->
  <div class="container mt-5">
    <div class="row">
      {% for property in properties %}
      <div class="col-lg-4 col-md-6 mb-4">
        <div class="card property-card h-100">
          <div class="card-img-container">
            {% if property.image %}
              <img src="{{ property.image.url }}" class="card-img-top" alt="{{ property.title }}">
            {% else %}
              <img src="{% static 'img/default-property.jpg' %}" class="card-img-top" alt="No Image Available">
            {% endif %}
            <div class="property-type-badge">{{ property.property_type }}</div>
            <button class="save-property-btn" data-property-id="{{ property.id }}">
              <i class="far fa-heart"></i>
            </button>
          </div>
         
          <div class="card-body">
            <h5 class="card-title">{{ property.title }}</h5>
            <p class="card-text text-muted">
              <i class="fas fa-map-marker-alt"></i> {{ property.location }}
            </p>
           
            <div class="property-details">
              <div class="price-section">
                <span class="price">‚Çπ{{ property.price }}</span>
              </div>
             
              <div class="property-features">
                <span class="feature">
                  <i class="fas fa-bed"></i>
                  {% if "2BHK" in property.title %}2 Beds
                  {% elif "3BHK" in property.title %}3 Beds
                  {% else %}2 Beds{% endif %}
                </span>
                <span class="feature">
                  <i class="fas fa-bath"></i>
                  {% if "2BHK" in property.title %}2 Baths
                  {% elif "3BHK" in property.title %}3 Baths
                  {% else %}2 Baths{% endif %}
                </span>
                <span class="feature">
                  <i class="fas fa-ruler-combined"></i>
                  {% if "2BHK" in property.title %}1200 sqft
                  {% elif "3BHK" in property.title %}1500 sqft
                  {% else %}1000 sqft{% endif %}
                </span>
              </div>
            </div>
           
            <div class="card-actions mt-3">
              <a href="#" class="btn btn-primary btn-sm view-details-btn">
  View Details
</a>
 
              <button class="btn btn-outline-secondary btn-sm contact-btn">
                Contact Agent
              </button>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12 text-center py-5">
        <div class="no-properties">
          <i class="fas fa-home fa-3x text-muted mb-3"></i>
          <h4>No Properties Available</h4>
          <p class="text-muted">No properties found matching your criteria.</p>
          {% if user.is_authenticated %}
            <a href="{% url 'add_property' %}" class="btn btn-success">
              <i class="fas fa-plus"></i> Add First Property
            </a>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
 
 
<!-- Properties Count -->
    {% if properties %}
    <div class="row mt-4">
      <div class="col-12 text-center">
        <p class="text-muted">
          <strong>{{ properties|length }} properties</strong> found
          {% if properties|length == 3 %}
          <!-- Showing your 3 properties from Django admin -->
          {% endif %}
        </p>
      </div>
    </div>
    {% endif %}
  </div>
 
  <!-- VIEW DETAILS MODAL -->
<div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="detailsTitle"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <img id="detailsImage" src="" alt="Property" class="img-fluid rounded mb-3">
        <div id="extraImagesContainer" class="d-flex flex-wrap gap-2 mb-3"></div>
        <p class="text-muted mb-1">
  üìç <a id="detailsLocation" href="#" target="_blank" class="text-decoration-none text-primary fw-semibold"></a>
</p>
 
        <h5 id="detailsPrice" class="text-primary mb-3"></h5>
        <p id="detailsDescription"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
 
<!-- CONTACT AGENT MODAL -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Contact Agent</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p><strong>Property:</strong> <span id="agentPropertyName"></span></p>
        <p><strong>Agent Name:</strong> <span id="agentName"></span></p>
        <p><strong>Phone:</strong>
          <a id="agentPhone" href="#" class="text-decoration-none text-primary fw-semibold"></a>
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
 
 <!-- ‚úÖ FOOTER (FULL WIDTH FIXED) -->
<footer class="site-footer text-white mt-5">
  <div class="footer-inner">
    <div class="row">
      <!-- Column 1 -->
      <div class="col-md-4 mb-3">
        <img src="{% static 'img/COMPANY22.PNG' %}" alt="Delegent Properties" height="40">
        <p>Your trusted platform for buying, selling, and renting properties with ease.</p>
      </div>

      <!-- Column 2: Quick Links -->
      <div class="col-md-4 mb-3">
        <h5 class="fw-bold">Quick Links</h5>
        <ul class="list-unstyled">
          <li><a href="{% url 'home' %}" class="footer-link">Home</a></li>
          <li><a href="{% url 'properties' %}" class="footer-link">Properties</a></li>
          <li><a href="{% url 'contact' %}" class="footer-link">Contact</a></li>
          {% if user.is_authenticated %}
            <li><a href="{% url 'logout' %}" class="footer-link">Logout</a></li>
          {% else %}
            <li><a href="{% url 'login' %}" class="footer-link">Login</a></li>
            <li><a href="{% url 'register' %}" class="footer-link">Register</a></li>
          {% endif %}
        </ul>
      </div>

      <!-- Column 3: Social Links -->
      <div class="col-md-4 mb-3">
        <h5 class="fw-bold">Follow Us</h5>
        <div class="social-icons">
          <a href="https://www.facebook.com/"><i class="fab fa-facebook"></i></a>
                            <a href="https://x.com/i/flow/signup?lang=en"><i class="fab fa-twitter"></i></a>
                            <a href="https://www.instagram.com/accounts/login/?hl=en"><i class="fab fa-instagram"></i></a>
                            <a href="https://api.linkedin.com/login"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>
    </div>

    <hr class="bg-light">
    <p class="text-center mb-0 small">Copyright ¬© Kavya Infoweb Pvt Ltd</p>
  </div>
</footer>


 
 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
 
  // --- Helpers ---
  const normalize = s => (String(s || '').toLowerCase().replace(/\s+/g, ''));
  const parsePriceFromText = text => {
    // remove everything except digits and return integer (e.g. "‚Çπ25,00,000.00" -> 2500000)
    const digits = String(text || '').replace(/[^\d]/g, '');
    return digits ? parseInt(digits, 10) : 0;
  };
 
  // --- FILTER IMPLEMENTATION ---
  function filterProperties() {
    const searchText = document.getElementById('searchInput').value.trim().toLowerCase();
    const priceVal = document.getElementById('priceFilter').value;
    const typeVal = document.getElementById('typeFilter').value;
 
    const cards = document.querySelectorAll('.property-card');
 
    cards.forEach(card => {
      const title = card.querySelector('.card-title')?.innerText.toLowerCase() || '';
      const location = card.querySelector('.card-text')?.innerText.toLowerCase() || '';
      const priceText = card.querySelector('.price')?.innerText || '';
      const priceNum = parsePriceFromText(priceText);
      const typeBadge = (card.querySelector('.property-type-badge')?.innerText || '');
 
      // search match (title OR location)
      let matchesSearch = true;
      if (searchText) {
        matchesSearch = title.includes(searchText) || location.includes(searchText);
      }
 
      // type match (normalize spaces/case)
      let matchesType = true;
      if (typeVal) {
        matchesType = normalize(typeBadge) === normalize(typeVal);
      }
 
      // price match using your select values
      let matchesPrice = true;
      if (priceVal) {
        const v = parseInt(priceVal, 10);
        if (v === 5000000) {
          // Below ‚Çπ50 Lakhs
          matchesPrice = priceNum <= v;
        } else if (v === 10000000) {
          // ‚Çπ50L - ‚Çπ1Cr
          matchesPrice = (priceNum > 5000000 && priceNum <= v);
        } else if (v === 20000000) {
          // ‚Çπ1Cr - ‚Çπ2Cr
          matchesPrice = (priceNum > 10000000 && priceNum <= v);
        } else if (v === 30000000) {
          // Above ‚Çπ2 Cr
          matchesPrice = priceNum > 20000000;
        } else {
          matchesPrice = true;
        }
      }
 
      // Final decision
      if (matchesSearch && matchesType && matchesPrice) {
        card.parentElement.style.display = ''; // show card column
      } else {
        card.parentElement.style.display = 'none'; // hide
      }
    });
  }
 
  // wire up Apply Filters button (your template calls filterProperties() inline, but let's also attach)
  const applyBtn = document.querySelector('button.btn.btn-primary');
  if (applyBtn) {
    // ensure we don't accidentally attach to 'View Details' by scoping to the filter bar area:
    const filterBar = document.querySelector('.filter-bar');
    if (filterBar) {
      const apply = filterBar.querySelector('button.btn.btn-primary');
      if (apply) apply.addEventListener('click', (e) => { e.preventDefault(); filterProperties(); });
    }
  }
 
  // Also run filter when user presses Enter in search field
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') { e.preventDefault(); filterProperties(); }
    });
  }
 
  // --- FAVORITES (localStorage) + toggle view ---
  const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
  let favoritesView = false;
 
  function updateFavoriteIcons() {
    document.querySelectorAll('.save-property-btn').forEach(btn => {
      const id = btn.dataset.propertyId;
      const heart = btn.querySelector('i');
      if (favorites.includes(id)) {
        heart.classList.remove('far'); heart.classList.add('fas');
        btn.style.background = '#ff4757'; btn.style.color = 'white';
      } else {
        heart.classList.remove('fas'); heart.classList.add('far');
        btn.style.background = 'white'; btn.style.color = 'black';
      }
    });
  }
 
  // attach favorite toggle to each heart button
  document.querySelectorAll('.save-property-btn').forEach(btn => {
    btn.addEventListener('click', function (e) {
      e.preventDefault();
      const id = this.dataset.propertyId;
      const idx = favorites.indexOf(id);
      if (idx === -1) favorites.push(id);
      else favorites.splice(idx, 1);
      localStorage.setItem('favorites', JSON.stringify(favorites));
      updateFavoriteIcons();
    });
  });
 
  // showFavorites() is called by your inline onclick; this toggles between showing favorites and showing all
  window.showFavorites = function() {
    const cards = document.querySelectorAll('.property-card');
    const favBtn = document.querySelector('button[onclick="showFavorites()"]');
 
    if (!favorites.length) {
      alert('No favorites saved yet!');
      return;
    }
 
    if (!favoritesView) {
      // hide non-favorites
      cards.forEach(card => {
        const id = card.querySelector('.save-property-btn')?.dataset.propertyId;
        if (id && favorites.includes(id)) card.parentElement.style.display = '';
        else card.parentElement.style.display = 'none';
      });
      favoritesView = true;
      if (favBtn) favBtn.innerHTML = 'Show All';
    } else {
      // show all
      cards.forEach(card => { card.parentElement.style.display = ''; });
      favoritesView = false;
      if (favBtn) favBtn.innerHTML = '‚ù§Ô∏è Favourites';
    }
  };
 
  // --- VIEW DETAILS: only buttons inside cards (avoid hooking the filter buttons) ---
  const detailsModalEl = document.getElementById('detailsModal');
  const detailsModal = detailsModalEl ? new bootstrap.Modal(detailsModalEl) : null;
 
  document.querySelectorAll('.view-details-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
    e.preventDefault();
    const card = this.closest('.property-card');
    if (!card || !detailsModal) return;
 
    const title = card.querySelector('.card-title')?.innerText || '';
    const location = card.querySelector('.card-text')?.innerText || '';
    const price = card.querySelector('.price')?.innerText || '';
    const imgSrc = card.querySelector('.card-img-top')?.src || '';
 
    // Fill modal
    document.getElementById('detailsTitle').innerText = title;
    const locationEl = document.getElementById('detailsLocation');
    locationEl.innerText = location;
    locationEl.href = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;
    document.getElementById('detailsPrice').innerText = price;
    document.getElementById('detailsImage').src = imgSrc;
    document.getElementById('detailsDescription').innerText =
      card.dataset.description || "A beautiful property located in the heart of Pune with great amenities and modern interiors.";
 
    // ‚úÖ Add extra images dynamically
    const extraImagesContainer = document.getElementById('extraImagesContainer');
    extraImagesContainer.innerHTML = ''; // Clear old ones
 
    // Example static additional images ‚Äî you can replace with real ones from your model later
    const extraImages = [
      "{% static 'img/2i2.avif' %}",
      "{% static 'img/1i2.jpg' %}"
    ];
 
    extraImages.forEach(src => {
      const img = document.createElement('img');
      img.src = src;
      img.alt = "Property Image";
      img.className = "img-thumbnail";
      img.style.width = "160px";
      img.style.height = "120px";
      extraImagesContainer.appendChild(img);
    });
 
    detailsModal.show();
  });
});
 
  // --- CONTACT AGENT modal (reads card; replace with real owner data if you have it on the card as data-* attrs) ---
  const contactModalEl = document.getElementById('contactModal');
  const contactModal = contactModalEl ? new bootstrap.Modal(contactModalEl) : null;
 
  document.querySelectorAll('.contact-btn').forEach(btn => {
  btn.addEventListener('click', function (e) {
    e.preventDefault();
    const card = this.closest('.property-card');
    if (!card || !contactModal) return;
 
    const title = card.querySelector('.card-title')?.innerText || '';
    const ownerName = card.dataset.ownerName || "Mr. Rahul Mehta";
    const ownerPhone = card.dataset.ownerPhone || "+919876543210";
 
    document.getElementById('agentPropertyName').innerText = title;
    document.getElementById('agentName').innerText = ownerName;
 
    // ‚úÖ Make phone number clickable
    const agentPhone = document.getElementById('agentPhone');
    agentPhone.innerText = ownerPhone;
    agentPhone.href = `tel:${ownerPhone}`;
 
 
    contactModal.show();
  });
});
 
 
  // initialize icons
  updateFavoriteIcons();
 
  // Expose filterProperties globally so your inline onclick still works
  window.filterProperties = filterProperties;
});
</script>
</body>
</html>
