{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register – Real Nest</title>

  <!-- Bootstrap CSS + Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/login.css' %}">
</head>
<body>

<div class="register-wrapper">
  <!-- LEFT SIDE -->
  <div class="register-left">
    <div class="left-overlay"></div>
    <div class="left-content">
      <span class="badge bg-light text-dark mb-2">Real Nest</span>
      <h5>Join the Best Property Platform</h5>
      <p>Sign up now and explore thousands of properties with ease.</p>
    </div>
  </div>

  <!-- RIGHT SIDE -->
  <div class="register-right">
    <h3 class="mt-2">Create Your Account</h3>
    <p class="text-muted mb-4">Sign up to get started</p>

    <!-- ✅ Show success or error messages -->
    

    <form id="registerForm" class="needs-validation" method="post" novalidate>

      {% csrf_token %}
    
       <div class="mb-3 position-relative">
  <span class="input-icon"><i class="bi bi-person"></i></span>
  <input 
      type="text" 
      name="full_name" 
      id="fullName" 
      class="form-control"
      placeholder="Full Name" 
      minlength="3" 
      pattern="^[A-Za-z\s]+$" 
      required>
  <div class="invalid-feedback" id="nameFeedback">
    ⚠️ Please enter only letters (min 3 characters, no numbers allowed).
  </div>
</div>


  <!-- Email -->
 <div class="mb-3 position-relative">
  <span class="input-icon"><i class="bi bi-envelope"></i></span>
  <input 
      type="email" 
      name="email" 
      id="email" 
      class="form-control"
      placeholder="Your Email"
      pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[A-Za-z]{2,}$"
      required>
  <div class="invalid-feedback" id="emailFeedback">
    ⚠️ Please enter a valid email address (e.g. user@example.com)
  </div>
</div>


  <!-- Phone -->
 <div class="mb-3 position-relative">
  <span class="input-icon"><i class="bi bi-telephone"></i></span>
  <input 
      type="tel" 
      name="phone" 
      id="phone" 
      class="form-control"
      placeholder="Phone Number"
      pattern="^[0-9]{10}$"
      required>
  <div class="invalid-feedback" id="phoneFeedback">
    ⚠️ Please enter a valid 10-digit phone number.
  </div>
</div>


  <!-- Password -->
  <div class="mb-3 position-relative">
    <span class="input-icon"><i class="bi bi-lock"></i></span>
    <input type="password" name="password1" id="password1" class="form-control"
           placeholder="Password" minlength="6" required>
    <span class="eye-icon" id="togglePass"><i class="bi bi-eye"></i></span>
    <div class="invalid-feedback">⚠️ Password must be at least 6 characters long.</div>
  </div>

  <!-- Confirm Password -->
  <div class="mb-3 position-relative">
    <span class="input-icon"><i class="bi bi-lock-fill"></i></span>
    <input type="password" name="password2" id="password2" class="form-control"
           placeholder="Confirm Password" required>
    <div class="invalid-feedback" id="confirmFeedback">⚠️ Passwords do not match.</div>
  </div>

      <button class="btn btn-success w-100 btn-register" type="submit">Register</button>
      {% if success %}
            <p class="text-success mt-3">{{ success }}</p>
          {% endif %}
 
          {% if error %}
            <p class="text-danger mt-2">{{ error }}</p>
          {% endif %}

      <div class="text-center mt-3 small-link">
        Already have an account? <a href="{% url 'login' %}">Login</a>
      </div>

    </form>

  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom JS -->
<script src="{% static 'js/login.js' %}"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("registerForm");
  const password1 = document.getElementById("password1");
  const password2 = document.getElementById("password2");
  const phone = document.getElementById("phone");

  // Toggle Password Visibility
  document.getElementById("togglePass").addEventListener("click", () => {
    const type = password1.type === "password" ? "text" : "password";
    password1.type = type;
    password2.type = type;
  });

  // Form Submit Validation
  form.addEventListener("submit", (event) => {
    let valid = true;

    // Bootstrap built-in validation
    if (!form.checkValidity()) {
      valid = false;
    }

    // Custom: Match Passwords
    if (password1.value !== password2.value) {
      valid = false;
      password2.setCustomValidity("Passwords do not match");
      document.getElementById("confirmFeedback").style.display = "block";
    } else {
      password2.setCustomValidity("");
    }

    // Custom: Validate 10-digit phone
    const phonePattern = /^[0-9]{10}$/;
    if (!phonePattern.test(phone.value)) {
      valid = false;
      phone.setCustomValidity("Invalid phone");
    } else {
      phone.setCustomValidity("");
    }

    if (!valid) {
      event.preventDefault();           // Stop form submission
      event.stopPropagation();
    }

    form.classList.add("was-validated"); // Show Bootstrap feedback
  });
});
</script>
<!-- user name -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const fullName = document.getElementById("fullName");
  const feedback = document.getElementById("nameFeedback");

  fullName.addEventListener("input", () => {
    const regex = /^[A-Za-z\s]+$/;  // letters + spaces only
    if (!regex.test(fullName.value)) {
      fullName.setCustomValidity("Invalid");
      feedback.textContent = "⚠️ Only letters are allowed, no numbers or symbols.";
      feedback.style.display = "block";
    } else if (fullName.value.length < 3) {
      fullName.setCustomValidity("Too Short");
      feedback.textContent = "⚠️ Full name must be at least 3 characters long.";
      feedback.style.display = "block";
    } else {
      fullName.setCustomValidity("");  // Valid
      feedback.style.display = "none";
    }
  });
});
</script>
<!-- email address -->
 <script>
document.addEventListener("DOMContentLoaded", () => {
  const email = document.getElementById("email");
  const feedback = document.getElementById("emailFeedback");

  email.addEventListener("input", () => {
    const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[A-Za-z]{2,}$/;

    if (!regex.test(email.value)) {
      email.setCustomValidity("Invalid Email");
      feedback.textContent = "⚠️ Please enter a valid email address (e.g. user@example.com)";
      feedback.style.display = "block";
    } else {
      email.setCustomValidity(""); // ✅ Valid email
      feedback.style.display = "none";
    }
  });
});
</script>

<!-- contact number -->
 <script>
document.addEventListener("DOMContentLoaded", () => {
  const phone = document.getElementById("phone");
  const feedback = document.getElementById("phoneFeedback");

  phone.addEventListener("input", () => {
    const value = phone.value.trim();

    // ✅ Check if input is ONLY 10 digits
    if (/^\d{10}$/.test(value)) {
      phone.setCustomValidity("");          // Valid
      feedback.style.display = "none";
    } else {
      phone.setCustomValidity("Invalid");   // Invalid
      feedback.textContent = "⚠️ Phone number must be exactly 10 digits.";
      feedback.style.display = "block";
    }
  });
});
</script>



</body>
</html>
